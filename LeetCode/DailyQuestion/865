class Solution:
    def subtreeWithAllDeepest(self, root: Optional[TreeNode]) -> Optional[TreeNode]:
        def dfs(node):
            if not node:
                return (0, None)
            
            ld, lnode = dfs(node.left)
            rd, rnode = dfs(node.right)
            
            if ld > rd:
                return (ld + 1, lnode)
            if rd > ld:
                return (rd + 1, rnode)
            
            return (ld + 1, node)
        
        return dfs(root)[1]
